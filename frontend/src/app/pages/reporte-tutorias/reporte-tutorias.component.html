<app-page-breadcrumb pageTitle="Reporte Tutorías" />
<div
  class="p-4 rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]"
>
  <div>
    <div class="p-4 sm:p-6">
      <div class="space-y-6">
        <ng-content>
          <div class="space-y-4">
            <div>
              <app-label>Periodo</app-label>
              <app-select
                [options]="periodoOptions"
                placeholder="Selecciona un periodo"
                [value]="selectedPeriodo"
                (valueChange)="handlePeriodoChange($event)"
                className="dark:bg-dark-900"
              ></app-select>
            </div>
            <div>
              <app-label>Sede</app-label>
              <app-select
                [options]="sedeOptions"
                placeholder="Selecciona una sede"
                [value]="selectedSede"
                (valueChange)="handleSedeChange($event)"
                className="dark:bg-dark-900"
              ></app-select>
            </div>
            <div>
              <app-label>Tutoría</app-label>
              <app-select
                [options]="tutoriaOptions"
                placeholder="Selecciona una tutoría"
                [value]="selectedTutoria"
                (valueChange)="handleTutoriaChange($event)"
                className="dark:bg-dark-900"
              ></app-select>
            </div>
          </div>
          <div class="flex flex-col sm:flex-row justify-between items-end sm:items-center gap-4 border-t border-gray-100 pt-6 dark:border-white/[0.05]">
        <div>
          <h3 class="text-base font-semibold text-gray-800 dark:text-white/90">
            Resultados del Reporte
          </h3>
          <p class="text-sm text-gray-500">Muestra el resumen basado en los filtros seleccionados.</p>
        </div>

        <button 
          (click)="exportToPDF()"
          [disabled]="tableData.length === 0"
          class="group relative flex items-center justify-center gap-2 px-6 py-2.5 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white shadow-lg shadow-red-200 dark:shadow-none rounded-xl transition-all duration-300 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <svg class="w-5 h-5 transition-transform group-hover:-translate-y-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10" />
          </svg>
          <span class="font-semibold tracking-wide text-sm">Descargar Reporte</span>
        </button>
      </div>

      <div class="overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]">
        <div class="max-w-full overflow-x-auto">
          <table class="min-w-full">
             </table>
        </div>
      </div>
        </ng-content>
        <div
          class="overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]"
        >
          <div class="max-w-full overflow-x-auto">
            <table class="min-w-full">
              <!-- Table Header -->
              <thead class="border-b border-gray-100 dark:border-white/[0.05]">
                <tr>
                  <th
                    class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400"
                  >
                    Sede
                  </th>
                  <th
                    class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400"
                  >
                    Tutoría ID
                  </th>
                  <th
                    class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400"
                  >
                    Nombre Tutoría
                  </th>
                  <th
                    class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400"
                  >
                    Tutores
                  </th>
                  <th
                    class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400"
                  >
                    Tutorados
                  </th>
                  <th
                    class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400"
                  >
                    Carreras Asociadas
                  </th>
                  <th
                    class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400"
                  >
                    Sesiones Cronograma
                  </th>
                  <th
                    class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400"
                  >
                    Total Sesiones
                  </th>
                  <th
                    class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400"
                  >
                    Total Sesiones Realizadas
                  </th>
                </tr>
              </thead>
              <!-- Table Body -->
              @if (tableData.length > 0) {
              <tbody class="divide-y divide-gray-100 dark:divide-white/[0.05]">
                @for (order of tableData; track $index) {
                <tr>
                  <td
                    class="px-5 py-4 sm:px-6 text-start text-gray-500 text-theme-sm dark:text-gray-400"
                  >
                    {{ order.sede }}
                  </td>
                  <td
                    class="px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400"
                  >
                    {{ order.tutoriaId }}
                  </td>
                  <td
                    class="px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400"
                  >
                    {{ order.nombreTutoria }}
                  </td>
                  <td
                    class="px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400"
                  >
                    {{ order.tutores }}
                  </td>
                  <td
                    class="px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400"
                  >
                    {{ order.tutorados }}
                  </td>
                  <td
                    class="px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400"
                  >
                    {{ order.carrerasAsociadas }}
                  </td>
                  <td
                    class="px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400"
                  >
                    {{ order.sesionesCronograma }}
                  </td>
                  <td
                    class="px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400"
                  >
                    {{ order.totalSesiones }}
                  </td>
                  <td
                    class="px-4 py-3 text-gray-500 text-start text-theme-sm dark:text-gray-400"
                  >
                    {{ order.totalSesionesRealizadas }}
                  </td>
                </tr>
                }
              </tbody>
              } @else {
              <tbody>
                <tr>
                  <td
                    colspan="5"
                    class="py-6 px-4 text-gray-500 text-theme-sm dark:text-gray-400"
                  >
                    No se encontraron registros.
                  </td>
                </tr>
              </tbody>
              }
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
